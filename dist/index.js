class ProductLoader{constructor(t,e,a){this.dataUrl=t,this.productsWrapper=e,this.buttonList=a}loadProducts(t){fetch(this.dataUrl).then((t=>t.json())).then((e=>{const a=e.list.slice(0,t).map((t=>this.generateProductHtml(t))).join("");this.productsWrapper.innerHTML=a})).catch((t=>{console.log("Wystąpił błąd:",t)}))}generateProductHtml(t){let e;return"ostatnia sztuka!"===t.availability.name?e="1":"brak towaru"===t.availability.name?e="0":"mała ilość"===t.availability.name&&(e="<5"),`\n        <article class="product animate" tabindex="0">\n          <div class="product__bar">\n            <div class="count">\n              <div class="cart">\n                <img src="assets/images/cart.png" alt="Ilość sztuk" class="cart" />\n                <p>sztuk: ${e}</p>\n              </div>\n              <span>oszczędzasz: ${t.price.gross.base_float-t.price.gross.promo_float} zł</span>\n            </div>\n          </div>\n          <div class="product__image">\n            <img src="https://www.mamezi.pl/praca/front/products/upload/${t.main_image}.png" alt="" />\n          </div>\n          <div class="product__info">\n            <div class="price">\n              <p class="price__new">${t.price.gross.final_float} zł</p>\n              <p class="price__old">${t.price.gross.base_float} zł</p>\n            </div>\n            <div class="product__name">\n              <p>${t.name}</p>\n            </div>\n            <div class="product__producer">\n              <p>${t.producer.name}</p>\n            </div>\n          </div>\n        </article>`}addEventListeners(){this.buttonList.forEach((t=>{t.addEventListener("click",(t=>{const e=parseInt(t.target.innerHTML);this.loadProducts(e)}))}))}}class PromotionTimer{constructor(){this.timerElement=document.querySelector(".js-timer"),this.targetDate=new Date("2023-05-28T00:00:00"),this.timer=null}start(){this.updateTimer(),this.timer=setInterval(this.updateTimer.bind(this),1e3)}updateTimer(){const t=new Date,e=this.targetDate-t,a=Math.floor(e/864e5),r=Math.floor(e/36e5%24),s=Math.floor(e/6e4%60),n=Math.floor(e/1e3%60);document.querySelector(".js-days").textContent=a.toString().padStart(2,"0"),document.querySelector(".js-hours").textContent=r.toString().padStart(2,"0"),document.querySelector(".js-minutes").textContent=s.toString().padStart(2,"0"),document.querySelector(".js-seconds").textContent=n.toString().padStart(2,"0"),e<=0&&clearInterval(this.timer)}}window.addEventListener("load",(()=>{const t=document.querySelector(".js-products"),e=document.querySelectorAll(".js-button"),a=new ProductLoader("https://www.mamezi.pl/praca/front/products/data.json",t,e);a.addEventListeners(),a.loadProducts(4);(new PromotionTimer).start()}));
//# sourceMappingURL=index.js.map